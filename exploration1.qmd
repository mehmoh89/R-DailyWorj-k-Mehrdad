---
title: 'Exploration 1: Description in One-Dimension'   # Document title
author: 'Mehrdad Mohammadi'                           # Author name
date: '`r format(Sys.Date(), "%B %d, %Y")`'           # Auto-inserts today’s date

format:                                               
  html:                                                # Settings for HTML output
    code-fold: true                                    # Allows folding/hiding code
    method: mathjax                                    # Renders LaTeX math
    url: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
  pdf:                                                 # Settings for PDF output
    number-sections: true                              # Numbered section headers
    colorlinks: true                                   # Hyperlinks appear in color
    cite-method: biblatex                              # Use BibLaTeX for citations
    keep-tex: true                                     # Keep intermediate .tex file
    monofontoptions: "Scale=0.7"                       # Smaller monospace font
    include-in-header:                                 # Extra LaTeX packages
      text: |
        \usepackage{bm}                                # Bold math symbols
        \usepackage{tikz}                              # Drawing diagrams
        \usepackage{tikz-cd}                           # Commutative diagrams
        \usetikzlibrary{arrows,automata,positioning,trees,decorations.markings}
        \usepackage{tikz-qtree}                        # Tree diagrams
        \usepackage{amsmath, booktabs, caption, longtable,listings,fancyvrb,fvextra} # Math, tables, captions
        \DeclareOldFontCommand{\bf}{\normalfont\bfseries}{\mathbf} # Compatibility fix
        \newfontfamily\grouptwofont[Ligatures=TeX]{Fira Sans}       # Custom font

fontsize: 10pt                                         # Font size for PDF
geometry: margin=1in                                   # Page margins
graphics: yes                                          # Allow graphics
bibliography: classbib.bib                             # Reference file
biblio-style: "authoryear-comp,natbib"                 # Citation style (Author Year)
---

# About the YAML Section

The block at the top of this document (between the three dashes `---`) is written in YAML.  
**YAML** is a configuration format whose name is a joke: it stands for  
**“YAML Ain’t Markup Language.”** This means YAML is not for designing documents like HTML,  
but for storing **metadata** and **settings** (such as title, author, date, and formatting options).  

Everything between the first `---` and the second `---` is called a **YAML block**.  
This section does not appear in the rendered document itself — instead, it tells Quarto  
how to build the document (e.g., what title to show, which output format to use, what citation style, etc.).  

- **YAML**: a simple format for settings.  
- **Metadata**: information about the document.  
- **LaTeX packages**: add features for math, tables, or diagrams in PDF.  
- **TikZ**: a LaTeX tool for drawing figures and diagrams.  
- **BibLaTeX**: manages references and citations using a .bib file.  
- **Bibliography style**: determines how citations appear (e.g., author-year).  

---

## What is Quarto?

**Quarto** is the system used to create this `.qmd` file.  
It’s a modern version of RMarkdown that lets you combine:  
- **Markdown text** (headings, lists, explanations)  
- **Code chunks** (in R, Python, Julia, etc.)  
- **YAML metadata** (document settings at the top)  

Quarto takes all of these pieces and **renders** them into final outputs like HTML, PDF, or Word.  


\input{mytexsymbols}                # LaTeX command

```{r setup, echo=FALSE, results=FALSE, include=FALSE, cache=FALSE}
library(here)         # manage file paths
# source(here("qmd_setup.R"))  # commented out because file is missing
library(dplyr)        # data manipulation
library(robustbase)   # robust statistics
library(psych)        # psychology/statistics functions
library(robustHD)     # robust methods for high-dimensional data
```
## About the Setup Chunk

This hidden setup chunk loads the packages and files needed for the rest of the analysis.  
Because it uses the options `echo=FALSE, results=FALSE, include=FALSE`, the code and its outputs  
do not appear in the rendered report, but the functions become available in the background.

- `library(here)`: helps manage file paths in a stable way.  
- `source(here("qmd_setup.R"))`: would load an extra setup script, but since that file is missing, I commented it out to avoid errors.  
- `library(dplyr)`: used for data wrangling and manipulation.  
- `library(robustbase)`: provides robust statistical methods that handle outliers better.  
- `library(psych)`: includes descriptive and psychometric functions.  
- `library(robustHD)`: offers robust methods for high-dimensional data.  

In short, this chunk prepares the environment so later code can run smoothly without loading packages repeatedly.
##


This document is called an "exploration" rather than a "problem set" or
"homework" because the point is to use the discussion, code, results, questions
here to learn something new, practice thinking about statistical concepts,
data, and code and to raise new questions that you'd like to discuss in class.
Some of the code and output might be visible in a pdf file and some might not.
The code has errors that you will need to fix and understand. You should work
with the source document itself as you answer the questions posed by me (the
author) as well as the questions posed by fictional actors who I invent in the
hopes of making these explorations fun. I also expect you to explain the code,
and otherwise explore the data and the questions arising from their discussion.

I expect that:
- you will make an attempt to answer every question posed here
- you will read the pieces that are recommended. You should be able to answer
  questions about what the reading said.
- you will make an attempt to explain to yourself every line of code written in
  this document, 
- you will run all of the code yourself, 
- that you will write some new code of your own as you work on answering the
  questions. (For example, you might look for alternative ways to summarize
  "location" or "spread" other than those used here. You might try different
  arguments to the same functions used here. Or you might find new functions or
  write your own. Or you might try using these functions on different data. You
  might have conversations with an AI to help you understand what is going on
  here and to get suggestions for alternatives with their associated advantages
  and disadvantages.)

Useful reading about description:

 - @wilcox2012introduction, Chap 1--3
 - @kaplan2012ism, Chap 2--3

\bigskip

"Brexit! UKIP! ISIL! Taliban! COVID!" When your old friend calls, she seems to
be yelling. Once she calms down, she explains: "I am in charge of Improving
Civic Society programs for the United Nations, and have been asked to step in
to help out at the UK Office of Social Capital." After you congratulate her on
what appears to be a promotion she continues. "The thing is that over here in
the UK, they are really big on numbers. I asked my staff for a simple report on
the status of civic society in the UK before all of the recent unrest happened
there, say, in 2005, before the London Bombings. They responded with numbers.
When I asked them to explain, I found their desks empty, their chairs knocked
over, their computers smashed, but their coffee cups still warm and untouched."
You ask her about her own safety and she responds. "This is all within
operational parameters. No worries. My problem is that I need to report to the
Now I don't even have numbers. Please help. Can we hop on a Zoom call?"

She does not enable video in the Zoom call. However, she begins sending you
some code. "Here is what I have in terms of output. Can you explain to me what
is going on with each line of code? I mean shouldn't the total number of hours
people spend helping each other be something other than `NA`? How do you figure
out what is going on when you make errors or find something confusing in `R`?"
## Reflection on the Scenario

This section introduces a fictional narrative about civic society in the UK before the 2005 London Bombings.  
The purpose is to frame the data analysis as a real-world problem: estimating how many hours people spent helping each other.  

The main task here is to carefully read the R code that follows, explain what each line is doing, and troubleshoot errors such as results that return `NA`.  
This exercise is not only about producing numbers but also about developing the skill of debugging and reasoning about code in context.


```{r}
load(url("http://jakebowers.org/Data/ho05.rda"))
table(ho05$postbomb, useNA = "ifany")
wrkdat <- ho05 %>% filter(postbomb == 0)
sum(wrkdat$hlphrs, na.rm = TRUE)

#I loaded the dataset, checked the postbomb variable, filtered pre-bombing cases, and summed the help hours (5,287 hours)
`